<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />

    <!-- Viewport PWA-first per iOS/Android - viewport-fit=cover per safe-area -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />

    <title>MATCHBOX - Scambia le tue figurine Panini</title>
    <meta
      name="description"
      content="MATCHBOX - App per lo scambio di figurine Panini tra collezionisti"
    />

    <!-- PWA Meta Tags (iOS + Android) -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- usa 'black-translucent' per estendere il contenuto sotto la status bar -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="MATCHBOX" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#05637b" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />

    <!-- Manifest -->
    <link rel="manifest" href="/manifest.json" />

    <!-- Base CSS minimale e sicuro: niente position:fixed/overflow:hidden globali -->
    <style>
      /* Safe-area vars disponibili ovunque */
      :root {
        --sat: env(safe-area-inset-top, 0px);
        --sab: env(safe-area-inset-bottom, 0px);
        --sal: env(safe-area-inset-left, 0px);
        --sar: env(safe-area-inset-right, 0px);

        /* Altezza nav (puoi sovrascriverla da CSS app) */
        --nav-h: 64px;
      }

      html, body, #root {
        height: 100%;
      }

      html, body {
        margin: 0;
        padding: 0;
        background-color: #05637b; /* colore di sfondo coerente con l'app */
        -webkit-text-size-adjust: 100%;
      }

      body {
        /* Lasciare lo scroll all'app (container main), non bloccare il body! */
        overscroll-behavior-y: contain;
        touch-action: manipulation;
        -webkit-tap-highlight-color: transparent;
      }

      #root {
        /* Il root prende tutta l'altezza disponibile, niente fixed */
        min-height: 100%;
        background-color: #05637b;
      }

      /* Modalità PWA standalone (iOS installata su Home) */
      @media (display-mode: standalone) {
        /* Non fissiamo html/body: lasciamo che i contenuti gestiscano 100dvh */
        html, body, #root {
          background-color: #05637b;
        }
      }
    </style>

    <!-- Rilevamento leggero modalità app per eventuali classi condizionali -->
    <script>
      (function () {
        try {
          var isStandalone =
            (window.matchMedia && window.matchMedia("(display-mode: standalone)").matches) ||
            (window.navigator && "standalone" in window.navigator && window.navigator.standalone === true);

          if (isStandalone) {
            document.documentElement.classList.add("pwa-standalone");
          }

          var isIOS = /iPhone|iPad|iPod/i.test(navigator.userAgent);
          if (isIOS) {
            document.documentElement.classList.add("platform-ios");
          }
        } catch (_) {
          /* no-op */
        }
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
